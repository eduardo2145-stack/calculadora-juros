<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="description" content="Portal JurosWeb. Finan√ßas, Cota√ß√µes e Simuladores.">
    <title>JurosWeb | Portal Financeiro</title>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root { 
            --primary: #8B0000; 
            --secondary: #212529; 
            --accent: #dca72e; 
            --bg: #f4f6f9; 
            --white: #ffffff;
        }
        
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding: 0; }
        
        /* TICKER */
        .ticker-wrap { background: #111; color: #eee; height: 35px; line-height: 35px; overflow: hidden; border-bottom: 2px solid var(--primary); white-space: nowrap; }
        .ticker-item { display: inline-block; padding-left: 100%; animation: ticker 40s linear infinite; }
        .tick { display: inline-block; margin-right: 40px; font-size: 0.9rem; }
        .up { color: #4cd137; } .down { color: #e84118; }
        @keyframes ticker { 0% { transform: translate3d(0, 0, 0); } 100% { transform: translate3d(-100%, 0, 0); } }

        /* HEADER */
        header { background: var(--primary); padding: 15px 0; box-shadow: 0 4px 10px rgba(0,0,0,0.2); position: sticky; top: 0; z-index: 999; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .header-flex { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.8rem; font-weight: 900; color: white; text-decoration: none; display: flex; align-items: center; gap: 10px; text-transform: uppercase; }
        
        /* BUSCA CORRIGIDA */
        .search-box { 
            display: flex; align-items: center; 
            background: rgba(255,255,255,0.15); 
            border: 1px solid rgba(255,255,255,0.3); 
            border-radius: 50px; 
            padding: 5px 15px; 
            width: 350px;
        }
        .search-box input { 
            background: transparent; border: none; color: white; flex: 1; outline: none; font-size: 1rem; 
        }
        .search-box input::placeholder { color: rgba(255,255,255,0.7); }
        .search-box i { color: white; cursor: pointer; }

        .nav-links a { color: rgba(255,255,255,0.9); text-decoration: none; font-weight: 600; margin-left: 20px; text-transform: uppercase; font-size: 0.85rem; }
        
        @media(max-width: 768px) {
            .header-flex { flex-direction: column; gap: 15px; }
            .search-box { width: 100%; }
            .nav-links { overflow-x: auto; width: 100%; white-space: nowrap; padding-bottom: 5px; }
        }

        /* HERO & DESTAQUE */
        .hero-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 25px; margin-top: 30px; }
        @media(max-width:900px){ .hero-grid { grid-template-columns: 1fr; } }

        .main-card { position: relative; height: 400px; border-radius: 8px; overflow: hidden; display: block; color: white; text-decoration: none; background: #000; }
        .main-img { width: 100%; height: 100%; object-fit: cover; opacity: 0.8; transition: 0.5s; }
        .main-card:hover .main-img { opacity: 0.6; transform: scale(1.05); }
        .main-text { position: absolute; bottom: 0; left: 0; padding: 30px; background: linear-gradient(transparent, black); width: 100%; box-sizing: border-box; }
        .tag { background: var(--primary); padding: 4px 10px; font-size: 0.7rem; font-weight: bold; border-radius: 3px; text-transform: uppercase; }
        
        /* RANKING SIDEBAR */
        .ranking-box { background: white; border-radius: 8px; border: 1px solid #ddd; overflow: hidden; }
        .rank-head { background: var(--secondary); color: white; padding: 10px 15px; font-weight: bold; font-size: 0.9rem; text-transform: uppercase; border-bottom: 3px solid var(--accent); }
        .rank-list li { display: flex; justify-content: space-between; padding: 12px 15px; border-bottom: 1px solid #eee; font-size: 0.9rem; }
        .rank-list { list-style: none; padding: 0; margin: 0; }

        /* FERRAMENTAS BAR */
        .tools-bar { background: var(--primary); margin-top: 40px; padding: 20px; border-radius: 8px; display: flex; justify-content: space-around; flex-wrap: wrap; gap: 15px; box-shadow: 0 5px 15px rgba(139,0,0,0.2); }
        .tool-item { color: white; text-decoration: none; font-weight: bold; display: flex; flex-direction: column; align-items: center; font-size: 0.9rem; transition: 0.3s; }
        .tool-item:hover { transform: translateY(-3px); opacity: 0.9; }
        .tool-item i { font-size: 1.5rem; margin-bottom: 5px; color: var(--accent); }

        /* CALCULADORA */
        .calc-box { background: white; padding: 30px; margin-top: 40px; border-radius: 8px; border: 1px solid #eee; }
        .calc-title { font-size: 1.5rem; color: var(--primary); font-weight: 800; margin-bottom: 20px; border-left: 5px solid var(--primary); padding-left: 15px; display: flex; justify-content: space-between; }
        
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .input-wrap label { font-size: 0.8rem; font-weight: 700; color: #666; text-transform: uppercase; display: block; margin-bottom: 5px; }
        .input-wrap input { width: 100%; padding: 12px; border: 2px solid #eee; border-radius: 4px; font-weight: 600; box-sizing: border-box; }
        .input-wrap input:focus { border-color: var(--primary); outline: none; }
        
        .btn-calc { width: 100%; padding: 15px; background: var(--primary); color: white; font-weight: 800; border: none; border-radius: 4px; cursor: pointer; margin-top: 20px; transition: 0.3s; text-transform: uppercase; }
        .btn-calc:hover { background: #600000; }

        .result-area { background: #fdfdfd; border: 1px dashed #ddd; padding: 20px; margin-top: 20px; display: none; text-align: center; }
        .total-val { font-size: 2.5rem; color: var(--primary); font-weight: 900; display: block; margin: 10px 0; }
        .row-res { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #eee; font-size: 0.95rem; }

        /* NOT√çCIAS GRID */
        .news-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-top: 30px; }
        .news-item { background: white; border: 1px solid #eee; border-radius: 8px; overflow: hidden; transition: 0.3s; text-decoration: none; color: inherit; display: flex; flex-direction: column; }
        .news-item:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.08); }
        .news-thumb { height: 180px; width: 100%; object-fit: cover; }
        .news-info { padding: 20px; flex: 1; display: flex; flex-direction: column; }
        .news-h { font-weight: 700; margin-bottom: 10px; line-height: 1.4; color: #222; }
        .news-date { font-size: 0.8rem; color: #888; margin-top: auto; }

        footer { background: #111; color: #999; padding: 40px 0; margin-top: 60px; text-align: center; font-size: 0.9rem; border-top: 4px solid var(--primary); }
    </style>
</head>
<body>

<div class="ticker-wrap">
    <div class="ticker-item" id="tickerContent">Carregando mercado...</div>
</div>

<header>
    <div class="container header-flex">
        <a href="index.html" class="logo"><i class="fas fa-chart-pie"></i> JurosWeb</a>
        
        <div class="search-box">
            <input type="text" id="campoBusca" placeholder="Pesquisar (ex: D√≥lar, Selic)...">
            <i class="fas fa-search" onclick="buscar()"></i>
        </div>

        <nav class="nav-links">
            <a href="index.html">In√≠cio</a>
            <a href="utilidades.html">Ferramentas</a>
            <a href="#simulador">Calculadoras</a>
            <a href="#noticias">Not√≠cias</a>
        </nav>
    </div>
</header>

<div class="container">

    <div class="hero-grid">
        <a href="#" class="main-card" id="heroLink">
            <img src="https://images.unsplash.com/photo-1611974765270-ca1258634369?auto=format&fit=crop&w=800&q=80" class="main-img" id="heroImg">
            <div class="main-text">
                <span class="tag">Destaque do Dia</span>
                <h2 style="margin:5px 0; font-size:1.8rem;" id="heroTitle">Mercado financeiro: Acompanhe as principais tend√™ncias</h2>
            </div>
        </a>

        <aside class="ranking-box">
            <div class="rank-head">Cota√ß√µes B3</div>
            <ul class="rank-list" id="rankList">
                <li><span>IBOV</span><span class="up">128.500 ‚ñ≤</span></li>
                <li><span>D√ìLAR</span><span class="down">5.15 ‚ñº</span></li>
                <li><span>PETR4</span><span class="up">38.20 ‚ñ≤</span></li>
                <li><span>VALE3</span><span class="down">62.10 ‚ñº</span></li>
                <li><span>BITCOIN</span><span class="up">$96k ‚ñ≤</span></li>
            </ul>
        </aside>
    </div>

    <div class="tools-bar">
        <a href="index.html" class="tool-item"><i class="fas fa-chart-line"></i> Juros Compostos</a>
        <a href="regra3.html" class="tool-item"><i class="fas fa-calculator"></i> Regra de 3</a>
        <a href="porcentagem.html" class="tool-item"><i class="fas fa-percentage"></i> Porcentagem</a>
        <a href="datas.html" class="tool-item"><i class="fas fa-calendar-alt"></i> Dias e Datas</a>
        <a href="imagem.html" class="tool-item"><i class="fas fa-image"></i> Editor IMG</a>
    </div>

    <div class="calc-box" id="simulador">
        <div class="calc-title">Simulador de Juros Compostos</div>
        
        <div class="form-grid">
            <div class="input-wrap"><label>Valor Inicial</label><input type="text" class="money" id="v_ini" placeholder="R$ 1.000,00"></div>
            <div class="input-wrap"><label>Aporte Mensal</label><input type="text" class="money" id="v_men" placeholder="R$ 500,00"></div>
            <div class="input-wrap"><label>Taxa Anual (%)</label><input type="number" id="v_taxa" placeholder="10.5"></div>
            <div class="input-wrap"><label>Anos</label><input type="number" id="v_anos" placeholder="10"></div>
        </div>

        <button class="btn-calc" onclick="calcular()">Simular Agora</button>

        <div class="result-area" id="resultado">
            <small>RESULTADO ESTIMADO</small>
            <span class="total-val" id="res_total">R$ 0,00</span>
            
            <div class="row-res"><span>Investido:</span> <strong id="res_inv">R$ 0,00</strong></div>
            <div class="row-res"><span>Juros Ganhos:</span> <strong style="color:green;" id="res_juros">R$ 0,00</strong></div>
            
            <div style="height:300px; margin-top:20px;"><canvas id="chart"></canvas></div>
            
            <button class="btn-calc" style="background:#333; margin-top:15px; font-size:0.9rem;" onclick="baixarPDF()">
                <i class="fas fa-file-pdf"></i> Baixar Relat√≥rio PDF
            </button>
        </div>
    </div>

    <h2 style="margin-top:50px; color:var(--primary); border-left:5px solid var(--primary); padding-left:15px;">√öltimas do Mercado</h2>
    <div class="news-grid" id="newsGrid">
        </div>

    <div style="background:#eee; text-align:center; padding:30px; margin:40px 0; color:#999; border:1px dashed #ccc;">Publicidade</div>

</div>

<footer>
    <p>&copy; 2026 JurosWeb.com.br - Todos os direitos reservados.</p>
    <p><a href="politica.html" style="color:#777;">Pol√≠tica de Privacidade</a></p>
</footer>

<script>
    // --- 1. CONFIGURA√á√ïES GERAIS ---
    let myChart = null;
    let pdfValues = {};

    // M√ÅSCARA DE DINHEIRO
    document.querySelectorAll('.money').forEach(input => {
        input.addEventListener('input', function(e) {
            let v = e.target.value.replace(/\D/g,'');
            v = (v/100).toFixed(2) + '';
            v = v.replace(".", ",");
            v = v.replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1.");
            e.target.value = 'R$ ' + v;
        });
    });

    function parseM(str) {
        if(!str) return 0;
        return parseFloat(str.replace(/[^\d,]/g, '').replace(',', '.')) || 0;
    }

    // --- 2. CALCULADORA ---
    function calcular() {
        let ini = parseM(document.getElementById('v_ini').value);
        let men = parseM(document.getElementById('v_men').value);
        let tax = parseFloat(document.getElementById('v_taxa').value) || 0;
        let ano = parseFloat(document.getElementById('v_anos').value);

        if(!ano || ano <= 0) { alert("Informe os anos!"); return; }

        let meses = ano * 12;
        let i = Math.pow(1 + (tax/100), 1/12) - 1;
        let total = ini;
        let investido = ini;
        
        // Arrays para o gr√°fico
        let labels = [];
        let dataTotal = [];
        let dataInv = [];

        for(let c=0; c<=meses; c++) {
            if(c > 0) {
                total = total * (1+i) + men;
                investido += men;
            }
            if(c % 6 === 0 || c === meses) { // Otimiza gr√°fico
                labels.push(c);
                dataTotal.push(total);
                dataInv.push(investido);
            }
        }

        // Exibe Resultados
        let fmt = {style:'currency', currency:'BRL'};
        document.getElementById('res_total').innerText = total.toLocaleString('pt-BR', fmt);
        document.getElementById('res_inv').innerText = investido.toLocaleString('pt-BR', fmt);
        document.getElementById('res_juros').innerText = (total - investido).toLocaleString('pt-BR', fmt);
        document.getElementById('resultado').style.display = 'block';

        // Gera Gr√°fico
        const ctx = document.getElementById('chart').getContext('2d');
        if(myChart) myChart.destroy();
        myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [
                    { label: 'Total', data: dataTotal, borderColor: '#8B0000', backgroundColor: 'rgba(139,0,0,0.1)', fill: true },
                    { label: 'Investido', data: dataInv, borderColor: '#555', borderDash: [5,5], fill: false }
                ]
            }
        });

        // Salva para PDF
        pdfValues = { total: document.getElementById('res_total').innerText, inv: document.getElementById('res_inv').innerText };
    }

    // --- 3. PDF ---
    async function baixarPDF() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        doc.text("JurosWeb - Relat√≥rio", 20, 20);
        doc.text(`Total Acumulado: ${pdfValues.total}`, 20, 40);
        doc.text(`Total Investido: ${pdfValues.inv}`, 20, 50);
        
        try {
            const canvas = document.getElementById('chart');
            const img = canvas.toDataURL("image/png");
            doc.addImage(img, 'PNG', 15, 60, 180, 100);
        } catch(e) {}
        
        doc.save("simulacao.pdf");
    }

    // --- 4. NOT√çCIAS BLINDADAS (H√çBRIDAS) ---
    // Links de Imagens Garantidos
    const imgBackups = [
        'https://images.unsplash.com/photo-1611974765270-ca1258634369?w=600&q=80',
        'https://images.unsplash.com/photo-1590283603385-17ffb3a7f29f?w=600&q=80',
        'https://images.unsplash.com/photo-1518186285589-2f7649de83e0?w=600&q=80',
        'https://images.unsplash.com/photo-1580519542036-c47de6196ba5?w=600&q=80',
        'https://images.unsplash.com/photo-1554224155-9ffd48f43606?w=600&q=80',
        'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600&q=80'
    ];

    // Dados de Not√≠cia "Offline" (Se a API falhar, usa isso)
    const fallbackNews = [
        {title: "Ibovespa fecha em alta com otimismo fiscal", date: "Hoje"},
        {title: "D√≥lar recua aguardando decis√£o do FED", date: "Hoje"},
        {title: "Banco Central mant√©m taxa Selic est√°vel", date: "Ontem"},
        {title: "Entenda como investir em Fundos Imobili√°rios", date: "Ontem"},
        {title: "Bitcoin supera marca hist√≥rica de valoriza√ß√£o", date: "2 dias atr√°s"},
        {title: "Petrobras anuncia novos dividendos", date: "2 dias atr√°s"}
    ];

    async function carregarNoticias(termo = '') {
        const query = termo || 'investimentos brasil';
        const grid = document.getElementById('newsGrid');
        
        // Fun√ß√£o interna para desenhar
        const render = (lista) => {
            grid.innerHTML = '';
            lista.forEach((item, i) => {
                let img = imgBackups[i % imgBackups.length];
                // Tenta pegar imagem real se existir
                if(item.enclosure?.link) img = item.enclosure.link;
                
                grid.innerHTML += `
                <a href="${item.link || '#'}" target="_blank" class="news-item">
                    <img src="${img}" class="news-thumb">
                    <div class="news-info">
                        <div class="news-h">${item.title}</div>
                        <div class="news-date">üìÖ ${item.pubDate ? new Date(item.pubDate).toLocaleDateString() : item.date}</div>
                    </div>
                </a>`;
            });
        };

        try {
            // Tenta buscar na API
            const res = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent('https://news.google.com/rss/search?q='+query+'&hl=pt-BR&gl=BR&ceid=BR:pt-419')}`);
            const data = await res.json();
            
            if(data.status === 'ok' && data.items.length > 0) {
                render(data.items.slice(0, 6)); // Sucesso: usa API
                // Atualiza destaque
                document.getElementById('heroTitle').innerText = data.items[0].title;
                document.getElementById('heroLink').href = data.items[0].link;
            } else {
                throw new Error("API Falhou");
            }
        } catch(e) {
            console.log("Usando Backup de Not√≠cias");
            render(fallbackNews); // Falha: usa not√≠cias fixas
        }
    }

    // --- 5. BUSCA ---
    function buscar() {
        let val = document.getElementById('campoBusca').value;
        if(val) {
            carregarNoticias(val);
            document.getElementById('newsGrid').scrollIntoView({behavior:'smooth'});
        }
    }
    
    // Ativa enter na busca
    document.getElementById('campoBusca').addEventListener('keypress', function (e) {
        if (e.key === 'Enter') buscar();
    });

    // --- 6. TICKER ---
    const ticks = [
        {n:'IBOV', v:'128k', c:'up'}, {n:'PETR4', v:'38.20', c:'down'}, 
        {n:'VALE3', v:'62.50', c:'up'}, {n:'D√ìLAR', v:'5.22', c:'up'},
        {n:'BTC', v:'$96k', c:'up'}
    ];
    let tickHtml = '';
    [...ticks, ...ticks].forEach(t => {
        let arrow = t.c==='up'?'‚ñ≤':'‚ñº';
        tickHtml += `<span class="tick">${t.n} <span class="${t.c}">${t.v} ${arrow}</span></span>`;
    });
    document.getElementById('tickerContent').innerHTML = tickHtml;

    // INICIAR
    carregarNoticias();
</script>

</body>
</html>
